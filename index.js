(function(){"use strict";const W="";function l(i,e,t,a,o,p,d,B){var s=typeof i=="function"?i.options:i;e&&(s.render=e,s.staticRenderFns=t,s._compiled=!0),a&&(s.functional=!0),p&&(s._scopeId="data-v-"+p);var r;if(d?(r=function(n){n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!n&&typeof __VUE_SSR_CONTEXT__<"u"&&(n=__VUE_SSR_CONTEXT__),o&&o.call(this,n),n&&n._registeredComponents&&n._registeredComponents.add(d)},s._ssrRegister=r):o&&(r=B?function(){o.call(this,(s.functional?this.parent:this).$root.$options.shadowRoot)}:o),r)if(s.functional){s._injectStyles=r;var F=s.render;s.render=function(T,c){return r.call(c),F(T,c)}}else{var u=s.beforeCreate;s.beforeCreate=u?[].concat(u,r):[r]}return{exports:i,options:s}}const h={data(){return{ready:!1,columns:{name:{label:"Name",type:"text",width:"1/4"},breakpointoptions:{label:"Settings",type:"settings",width:"3/4"}},columnsBreakpoints:{mediaquery:{label:"Mediaquery",type:"select"},name:{label:"Name",type:"text"},width:{label:"Width",type:"number",after:"px"}},endpoints:{field:"responsive-images",section:"responsive-images",model:"responsive-images"},endpointsBreakpoints:{field:"responsive-images-breakpoints",section:"responsive-images-breakpoints",model:"responsive-images-breakpoints"},responsivesettingsModel:[],responsivebreakpointsModel:[],hasChanges:!1}},props:{config:{type:Object,default:()=>({breakpoints:[],settings:[]})}},created(){this.$events.$on("keydown.cmd.s",this.submit)},destroyed(){this.$events.$off("keydown.cmd.s",this.submit)},mounted(){this.responsivesettingsModel=Object.assign([],this.settings),this.responsivebreakpointsModel=Object.assign([],this.breakpoints),this.$nextTick(()=>this.ready=!0)},computed:{fields(){return{name:{label:"Name",type:"slug",required:!0},breakpointoptions:{label:"Options",type:"structure",columns:{breakpoint:{type:"select",label:"Name",required:!0},width:{type:"number",label:"Width",min:0,step:1,default:null,after:"px"},cropwidth:{type:"toggle",default:!1,label:"Crop width"},height:{type:"number",label:"Height",min:0,step:1,default:null,after:"px"},cropheight:{type:"toggle",default:!1,label:"Crop height"},retina:{type:"toggle",default:!0,label:"Retina"}},fields:{breakpoint:{label:"Breakpoint",type:"select",options:this.breakpointOptions,width:"1/6"},width:{label:"Width",type:"number",min:0,width:"1/6"},cropwidth:{label:"Crop width",type:"toggle",default:0,width:"1/6"},height:{label:"Height",type:"number",min:0,width:"1/6"},cropheight:{label:"Crop height",type:"toggle",default:0,width:"1/6"},retina:{label:"Retina support",type:"toggle",default:!0,width:"1/6"}}}}},breakpointOptions(){return this.breakpoints.map(e=>Object.assign({},{text:e.name,value:e.name}))},fieldsBreakpoints(){return{mediaquery:{label:"Mediaquery",type:"select",default:"min-width",options:[{text:"Min width",value:"min-width"},{text:"Max width",value:"max-width"}]},name:{label:"Name",type:"text"},width:{label:"Width",type:"number",after:"px"}}},settings(){return this.config&&this.config.hasOwnProperty("settings")?this.config.settings:[]},breakpoints(){return this.config&&this.config.hasOwnProperty("breakpoints")?this.config.breakpoints:[]}},methods:{async submit(i){i&&i.preventDefault(),await this.$api.post(this.endpoints.field,{breakpoints:this.responsivebreakpointsModel,settings:this.responsivesettingsModel}),this.$reload(),this.hasChanges=!1},reset(){this.responsivesettingsModel=Object.assign([],this.settings),this.responsivebreakpointsModel=Object.assign([],this.breakpoints),this.hasChanges=!1},input(){return this.ready&&(JSON.stringify(this.settings)!==JSON.stringify(this.responsivesettingsModel)||JSON.stringify(this.breakpoints)!==JSON.stringify(this.responsivebreakpointsModel))?this.hasChanges=!0:this.hasChanges=!1}}};var f=function(){var e=this,t=e._self._c;return t("k-inside",{staticClass:"k-responsive-images-panel",scopedSlots:e._u([{key:"footer",fn:function(){return[e.hasChanges?t("nav",{staticClass:"k-form-buttons",attrs:{"data-theme":"notice"}},[t("k-view",[t("k-button",{staticClass:"k-form-button",attrs:{icon:"undo",type:"button"},on:{click:e.reset}},[e._v(" "+e._s(e.$t("nerdcel.responsive-images.undo"))+" ")]),t("k-button",{staticClass:"k-form-button",attrs:{icon:"check",type:"button"},on:{click:e.submit}},[e._v(" "+e._s(e.$t("nerdcel.responsive-images.save"))+" ")])],1)],1):e._e()]},proxy:!0}])},[t("k-view",[t("k-header",[t("h2",[e._v(e._s(e.$t("nerdcel.responsive-images.title")))])])],1),t("k-view",[t("k-grid",{attrs:{gutter:"medium"}},[t("k-column",{attrs:{width:"1/3"}},[t("div",{staticClass:"k-section k-responsive-images-breakpoints"},[t("k-structure-field",{attrs:{columns:e.columnsBreakpoints,required:!0,label:e.$t("nerdcel.responsive-images.breakpoints"),name:"responsivebreakpoints",help:e.$t("nerdcel.responsive-images.breakpointsinfo"),fields:e.fieldsBreakpoints,endpoints:e.endpointsBreakpoints,duplicate:!1},on:{input:e.input},model:{value:e.responsivebreakpointsModel,callback:function(a){e.responsivebreakpointsModel=a},expression:"responsivebreakpointsModel"}})],1)]),t("k-column",{attrs:{width:"2/3"}},[t("div",{staticClass:"k-section"},[t("k-info-field",{attrs:{label:e.$t("nerdcel.responsive-images.info"),text:"responsiveImage('key-settings', $image, $optionalClasses)"}})],1),t("div",{staticClass:"k-section k-responsive-images-view"},[t("k-structure-field",{attrs:{disabled:!this.breakpoints.length,columns:e.columns,required:!0,label:e.$t("nerdcel.responsive-images.settings"),name:"responsivesettings",fields:e.fields,endpoints:e.endpoints,duplicate:!0},on:{input:e.input},model:{value:e.responsivesettingsModel,callback:function(a){e.responsivesettingsModel=a},expression:"responsivesettingsModel"}})],1)])],1)],1)],1)},g=[],v=l(h,f,g,!1,null,null,null,null);const m=v.exports,b={props:{value:String,column:Object,field:Object}};var _=function(){var e=this,t=e._self._c;return t("div",{staticClass:"k-settings-preview-field"},[t("k-table",{attrs:{empty:"—",columns:{breakpoint:{label:"Breakpoint",type:"text"},width:{label:"Width",type:"number",after:"px"},cropwidth:{label:"Crop?",type:"toggle-extend"},height:{label:"Height",type:"number",after:"px"},cropheight:{label:"Crop?",type:"toggle-extend"},retina:{label:"Retina?",type:"toggle-extend"}},rows:e.value}})],1)},k=[],y=l(b,_,k,!1,null,null,null,null);const w=y.exports,$={props:{value:String,column:Object,field:Object}};var C=function(){var e=this,t=e._self._c;return t("div",{staticClass:"k-toggle-extend-preview-field"},[t("k-text-field-preview",[e._v(e._s(e.value?"✓":"⨯"))])],1)},x=[],O=l($,C,x,!1,null,null,null,null);const M=O.exports,R={};var N=function(){var e=this,t=e._self._c;return t("k-inside",{staticClass:"k-responsive-images-panel"},[t("k-view",[t("k-header",[t("h2",[e._v(e._s(e.$t("nerdcel.responsive-images.restricted.title")))])]),t("p",[e._v(" "+e._s(e.$t("nerdcel.responsive-images.restricted.text"))+" ")])],1)],1)},S=[],j=l(R,N,S,!1,null,null,null,null);const q=j.exports;window.panel.plugin("nerdcel/responsive-images",{components:{"k-nerdcel-responsive-images":m,"k-nerdcel-restricted":q,"k-settings-field-preview":w,"k-toggle-extend-field-preview":M}})})();
